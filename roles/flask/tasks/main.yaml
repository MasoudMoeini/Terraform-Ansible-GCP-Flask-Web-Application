---
- name: Ensure pip is at the latest version
  apt:
    name: python3-pip
    state: latest
    update_cache: yes
#installing libraries
- name: install python libraries
  pip:
    requirements: ./requirements.txt
#- name: install modules in a virtualenv
  #  pip: #requirements: /home/{{ ansible_ssh_user }}/{{ app_name }}/requirements.txt
- name: Your copy task
  copy: src={{ item.src }} dest={{ item.dest }}
  with_items:
    - { src: '/Users/masoudmoeini/Desktop/Terraform-Ansible-GCP-FlaskWebApplication/app.py', dest: './home/masod_atc/app.py' }
    - { src: '/Users/masoudmoeini/Desktop/Terraform-Ansible-GCP-FlaskWebApplication/main.py', dest: './home/masod_atc/main.py' }
    - { src: '/Users/masoudmoeini/Desktop/Terraform-Ansible-GCP-FlaskWebApplication/minst.py', dest: './home/masod_atc/minst.py' }
    - { src: '/Users/masoudmoeini/Desktop/Terraform-Ansible-GCP-FlaskWebApplication/model.h5', dest: './home/masod_atc/model.h5' }
    - { src: ' /Users/masoudmoeini/Desktop/Terraform-Ansible-GCP-FlaskWebApplication/template', dest: './home/masod_atc/template' }
- name: execute flaskstroy application, run my script!
  command: python3 ./home/masod_atc/main.py

     
